'use strict';var getClass,getId,getTag,GET,POST,fail,log,warn,error,trackEvent,storageDefault,createElement,runInPage,nodeReady;
(function(){getClass=function(c){return document.getElementsByClassName(c)};getId=function(c){return document.getElementById(c)};getTag=function(c){return document.getElementsByTagName(c)};HTMLElement.prototype.getClass=HTMLElement.prototype.getElementsByClassName;HTMLElement.prototype.getId=HTMLElement.prototype.getElementById;HTMLElement.prototype.getTag=HTMLElement.prototype.getElementsByTagName;String.prototype.contains=function(c){return-1<this.indexOf(c)};var c=function(c,a,m,g){var h=new XMLHttpRequest;
h.open(m,c,!0);h.onreadystatechange=function(){4===h.readyState&&a(h.responseText,h)};"POST"===m&&h.setRequestHeader("Content-type","application/x-www-form-urlencoded");h.send(g)};POST=function(l,a,m){c(l,a,"POST",m)};GET=function(l,a){c(l,a,"GET")};fail=function(c){alert(c);throw c;};log=function a(){if("undefined"!==typeof debug&&debug&&"undefined"!==typeof console){var c=arguments;try{c.callee=a.caller}catch(g){}c=[].slice.call(c);"object"===typeof console.log?log.apply.call(console.log,console,
c):console.log.apply(console,c)}};warn=function(a){debug&&console.warn(a);return a};error=function(a){debug&&console.error(a);return a};trackEvent=function(){"undefined"===typeof _kmq&&(window._kmq=[]);var a=[].slice.call(arguments);1===a.length?_kmq.push(["record",a[0].replace(/\s/gi,"_")]):_kmq.push(a)};storageDefault=function(a,c){if("string"===typeof a)null===localStorage.getItem(a)&&localStorage.setItem(a,c);else if("object"===typeof a)for(var g in a)null===localStorage.getItem(g)&&localStorage.setItem(a,
a[g]);else fail("storageDefault expects an object or 2 string arguments")};createElement=function(a,c,g){a=document.createElement(a);if("undefined"!==typeof c){for(var h in c)a[h]=c[h];if("undefined"!==typeof g)for(var f in g)a.setAttribute(f,g[f])}return a};JSON.guardedParse=function(a){var c={};try{0===a.indexOf("{")&&"}"===a.charAt(a.length-1)?c=JSON.parse(a):(console.log("first and last characters are not { and }. returning false"),c=!1)}catch(g){alert("BAD JSON: "+a),console.error("CAUGHT ERROR! ->",
g),c=!1}return c};runInPage=function(){var a=createElement("script"),c;for(c in arguments)"string"===typeof arguments[c]?a.innerHTML+=arguments[c]:"function"===typeof arguments[c]&&(a.innerHTML+="("+arguments[c]+"())");try{document.documentElement.appendChild(a)}catch(g){console.error("CAUGHT ERROR: ",g,"on:",a.innerHTML)}};nodeReady=function m(c,h,f){var b=typeof c;if("string"===b)try{b=eval(c)}catch(n){n instanceof EvalError?console.error("EvalError on call:"+c+" :( try passing in a function like: \nnodeReady(function(){return "+
c+";}, callback);",n):console.error("non-EvalError when executing call:"+c+" :(",n)}else if("function"===b)b=c();else throw b="At this time, nodeReady only accepts a string javascript call or function for the first argument, and the callback for the second argument.",alert(b),b;b?h(b):("undefined"===typeof f&&(f=40),setTimeout(function(){m(c,h)},f))}})();if("undefined"===typeof window||null===window)window={twttr:{}};null==window.twttr&&(window.twttr={});if("undefined"===typeof twttr||null===twttr)twttr={};
(function(){function c(e,i){i=i||"";"string"!==typeof e&&(e.global&&0>i.indexOf("g")&&(i+="g"),e.ignoreCase&&0>i.indexOf("i")&&(i+="i"),e.multiline&&0>i.indexOf("m")&&(i+="m"),e=e.source);return RegExp(e.replace(/#\{(\w+)\}/g,function(e,i){var a=twttr.txt.regexen[i]||"";"string"!==typeof a&&(a=a.source);return a}),i)}function l(e,i){return e.replace(/#\{(\w+)\}/g,function(e,a){return i[a]||""})}function a(e,i,d){var a=String.fromCharCode(i);d!==i&&(a+="-"+String.fromCharCode(d));e.push(a);return e}
function m(e){var i={},d;for(d in e)e.hasOwnProperty(d)&&(i[d]=e[d]);return i}function g(e,i,d){return!d?"string"===typeof e&&e.match(i)&&RegExp["$&"]===e:!e||e.match(i)&&RegExp["$&"]===e}twttr.txt={};twttr.txt.regexen={};var h={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"};twttr.txt.htmlEscape=function(e){return e&&e.replace(/[&"'><]/g,function(e){return h[e]})};twttr.txt.regexSupplant=c;twttr.txt.stringSupplant=l;twttr.txt.addCharsToCharClass=a;var f=String.fromCharCode,b=[f(32),f(133),
f(160),f(5760),f(6158),f(8232),f(8233),f(8239),f(8287),f(12288)];a(b,9,13);a(b,8192,8202);var n=[f(65534),f(65279),f(65535)];a(n,8234,8238);twttr.txt.regexen.spaces_group=c(b.join(""));twttr.txt.regexen.spaces=c("["+b.join("")+"]");twttr.txt.regexen.invalid_chars_group=c(n.join(""));twttr.txt.regexen.punct=/\!'#%&'\(\)*\+,\\\-\.\/:;<=>\?@\[\]\^_{|}~\$/;b=[];a(b,1024,1279);a(b,1280,1319);a(b,11744,11775);a(b,42560,42655);a(b,1425,1471);a(b,1473,1474);a(b,1476,1477);a(b,1479,1479);a(b,1488,1514);a(b,
1520,1524);a(b,64274,64296);a(b,64298,64310);a(b,64312,64316);a(b,64318,64318);a(b,64320,64321);a(b,64323,64324);a(b,64326,64335);a(b,1552,1562);a(b,1568,1631);a(b,1646,1747);a(b,1749,1756);a(b,1758,1768);a(b,1770,1775);a(b,1786,1788);a(b,1791,1791);a(b,1872,1919);a(b,2208,2208);a(b,2210,2220);a(b,2276,2302);a(b,64336,64433);a(b,64467,64829);a(b,64848,64911);a(b,64914,64967);a(b,65008,65019);a(b,65136,65140);a(b,65142,65276);a(b,8204,8204);a(b,3585,3642);a(b,3648,3662);a(b,4352,4607);a(b,12592,12677);
a(b,43360,43391);a(b,44032,55215);a(b,55216,55295);a(b,65441,65500);a(b,12449,12538);a(b,12540,12542);a(b,65382,65439);a(b,65392,65392);a(b,65296,65305);a(b,65313,65338);a(b,65345,65370);a(b,12353,12438);a(b,12441,12446);a(b,13312,19903);a(b,19968,40959);a(b,173824,177983);a(b,177984,178207);a(b,194560,195103);a(b,12291,12291);a(b,12293,12293);a(b,12347,12347);twttr.txt.regexen.nonLatinHashtagChars=c(b.join(""));b=[];a(b,192,214);a(b,216,246);a(b,248,255);a(b,256,591);a(b,595,596);a(b,598,599);a(b,
601,601);a(b,603,603);a(b,611,611);a(b,616,616);a(b,623,623);a(b,626,626);a(b,649,649);a(b,651,651);a(b,699,699);a(b,768,879);a(b,7680,7935);twttr.txt.regexen.latinAccentChars=c(b.join(""));twttr.txt.regexen.hashSigns=/[#\uff03]/;twttr.txt.regexen.hashtagAlpha=c(/[a-z_#{latinAccentChars}#{nonLatinHashtagChars}]/i);twttr.txt.regexen.hashtagAlphaNumeric=c(/[a-z0-9_#{latinAccentChars}#{nonLatinHashtagChars}]/i);twttr.txt.regexen.endHashtagMatch=c(/^(?:#{hashSigns}|:\/\/)/);twttr.txt.regexen.hashtagBoundary=
c(/(?:^|$|[^&a-z0-9_#{latinAccentChars}#{nonLatinHashtagChars}])/);twttr.txt.regexen.validHashtag=c(/(#{hashtagBoundary})(#{hashSigns})(#{hashtagAlphaNumeric}*#{hashtagAlpha}#{hashtagAlphaNumeric}*)/gi);twttr.txt.regexen.validMentionPrecedingChars=/(?:^|[^a-zA-Z0-9_!#$%&*@\uff20]|RT:?)/;twttr.txt.regexen.atSigns=/[@\uff20]/;twttr.txt.regexen.validMentionOrList=c("(#{validMentionPrecedingChars})(#{atSigns})([a-zA-Z0-9_]{1,20})(/[a-zA-Z][a-zA-Z0-9_-]{0,24})?","g");twttr.txt.regexen.validReply=c(/^(?:#{spaces})*#{atSigns}([a-zA-Z0-9_]{1,20})/);
twttr.txt.regexen.endMentionMatch=c(/^(?:#{atSigns}|[#{latinAccentChars}]|:\/\/)/);twttr.txt.regexen.validUrlPrecedingChars=c(/(?:[^A-Za-z0-9@\uff20$#\uff03#{invalid_chars_group}]|^)/);twttr.txt.regexen.invalidUrlWithoutProtocolPrecedingChars=/[-_.\/]$/;twttr.txt.regexen.invalidDomainChars=l("#{punct}#{spaces_group}#{invalid_chars_group}",twttr.txt.regexen);twttr.txt.regexen.validDomainChars=c(/[^#{invalidDomainChars}]/);twttr.txt.regexen.validSubdomain=c(/(?:(?:#{validDomainChars}(?:[_-]|#{validDomainChars})*)?#{validDomainChars}\.)/);
twttr.txt.regexen.validDomainName=c(/(?:(?:#{validDomainChars}(?:-|#{validDomainChars})*)?#{validDomainChars}\.)/);twttr.txt.regexen.validGTLD=c(/(?:(?:aero|asia|biz|cat|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|tel|travel|xxx)(?=[^0-9a-zA-Z]|$))/);twttr.txt.regexen.validCCTLD=c(/(?:(?:ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw)(?=[^0-9a-zA-Z]|$))/);
twttr.txt.regexen.validPunycode=c(/(?:xn--[0-9a-z]+)/);twttr.txt.regexen.validDomain=c(/(?:#{validSubdomain}*#{validDomainName}(?:#{validGTLD}|#{validCCTLD}|#{validPunycode}))/);twttr.txt.regexen.validAsciiDomain=c(/(?:(?:[a-z0-9#{latinAccentChars}]+)\.)+(?:#{validGTLD}|#{validCCTLD}|#{validPunycode})/gi);twttr.txt.regexen.invalidShortDomain=c(/^#{validDomainName}#{validCCTLD}$/);twttr.txt.regexen.validPortNumber=c(/[0-9]+/);twttr.txt.regexen.validGeneralUrlPathChars=c(/[a-z0-9!\*';:=\+,\.\$\/%#\[\]\-_~|&#{latinAccentChars}]/i);
twttr.txt.regexen.validUrlBalancedParens=c(/\(#{validGeneralUrlPathChars}+\)/i);twttr.txt.regexen.validUrlPathEndingChars=c(/[\+\-a-z0-9=_#\/#{latinAccentChars}]|(?:#{validUrlBalancedParens})/i);twttr.txt.regexen.validUrlPath=c("(?:(?:#{validGeneralUrlPathChars}*(?:#{validUrlBalancedParens}#{validGeneralUrlPathChars}*)*#{validUrlPathEndingChars})|(?:@#{validGeneralUrlPathChars}+/))","i");twttr.txt.regexen.validUrlQueryChars=/[a-z0-9!?\*'\(\);:&=\+\$\/%#\[\]\-_\.,~|]/i;twttr.txt.regexen.validUrlQueryEndingChars=
/[a-z0-9_&=#\/]/i;twttr.txt.regexen.extractUrl=c("((#{validUrlPrecedingChars})((https?:\\/\\/)?(#{validDomain})(?::(#{validPortNumber}))?(\\/#{validUrlPath}*)?(\\?#{validUrlQueryChars}*#{validUrlQueryEndingChars})?))","gi");twttr.txt.regexen.validTcoUrl=/^https?:\/\/t\.co\/[a-z0-9]+/i;twttr.txt.regexen.cashtag=/[a-z]{1,6}(?:[._][a-z]{1,2})?/i;twttr.txt.regexen.validCashtag=c("(^|#{spaces})(\\$)(#{cashtag})(?=$|\\s|[#{punct}])","gi");twttr.txt.regexen.validateUrlUnreserved=/[a-z0-9\-._~]/i;twttr.txt.regexen.validateUrlPctEncoded=
/(?:%[0-9a-f]{2})/i;twttr.txt.regexen.validateUrlSubDelims=/[!$&'()*+,;=]/i;twttr.txt.regexen.validateUrlPchar=c("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|[:|@])","i");twttr.txt.regexen.validateUrlScheme=/(?:[a-z][a-z0-9+\-.]*)/i;twttr.txt.regexen.validateUrlUserinfo=c("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|:)*","i");twttr.txt.regexen.validateUrlDecOctet=/(?:[0-9]|(?:[1-9][0-9])|(?:1[0-9]{2})|(?:2[0-4][0-9])|(?:25[0-5]))/i;
twttr.txt.regexen.validateUrlIpv4=c(/(?:#{validateUrlDecOctet}(?:\.#{validateUrlDecOctet}){3})/i);twttr.txt.regexen.validateUrlIpv6=/(?:\[[a-f0-9:\.]+\])/i;twttr.txt.regexen.validateUrlIp=c("(?:#{validateUrlIpv4}|#{validateUrlIpv6})","i");twttr.txt.regexen.validateUrlSubDomainSegment=/(?:[a-z0-9](?:[a-z0-9_\-]*[a-z0-9])?)/i;twttr.txt.regexen.validateUrlDomainSegment=/(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?)/i;twttr.txt.regexen.validateUrlDomainTld=/(?:[a-z](?:[a-z0-9\-]*[a-z0-9])?)/i;twttr.txt.regexen.validateUrlDomain=
c(/(?:(?:#{validateUrlSubDomainSegment]}\.)*(?:#{validateUrlDomainSegment]}\.)#{validateUrlDomainTld})/i);twttr.txt.regexen.validateUrlHost=c("(?:#{validateUrlIp}|#{validateUrlDomain})","i");twttr.txt.regexen.validateUrlUnicodeSubDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9_\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i;twttr.txt.regexen.validateUrlUnicodeDomainSegment=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i;
twttr.txt.regexen.validateUrlUnicodeDomainTld=/(?:(?:[a-z]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i;twttr.txt.regexen.validateUrlUnicodeDomain=c(/(?:(?:#{validateUrlUnicodeSubDomainSegment}\.)*(?:#{validateUrlUnicodeDomainSegment}\.)#{validateUrlUnicodeDomainTld})/i);twttr.txt.regexen.validateUrlUnicodeHost=c("(?:#{validateUrlIp}|#{validateUrlUnicodeDomain})","i");twttr.txt.regexen.validateUrlPort=/[0-9]{1,5}/;twttr.txt.regexen.validateUrlUnicodeAuthority=
c("(?:(#{validateUrlUserinfo})@)?(#{validateUrlUnicodeHost})(?::(#{validateUrlPort}))?","i");twttr.txt.regexen.validateUrlAuthority=c("(?:(#{validateUrlUserinfo})@)?(#{validateUrlHost})(?::(#{validateUrlPort}))?","i");twttr.txt.regexen.validateUrlPath=c(/(\/#{validateUrlPchar}*)*/i);twttr.txt.regexen.validateUrlQuery=c(/(#{validateUrlPchar}|\/|\?)*/i);twttr.txt.regexen.validateUrlFragment=c(/(#{validateUrlPchar}|\/|\?)*/i);twttr.txt.regexen.validateUrlUnencoded=c("^(?:([^:/?#]+):\\/\\/)?([^/?#]*)([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$",
"i");var t={urlClass:!0,listClass:!0,usernameClass:!0,hashtagClass:!0,cashtagClass:!0,usernameUrlBase:!0,listUrlBase:!0,hashtagUrlBase:!0,cashtagUrlBase:!0,usernameUrlBlock:!0,listUrlBlock:!0,hashtagUrlBlock:!0,linkUrlBlock:!0,usernameIncludeSymbol:!0,suppressLists:!0,suppressNoFollow:!0,suppressDataScreenName:!0,urlEntities:!0,symbolTag:!0,textWithSymbolTag:!0,urlTarget:!0,invisibleTagAttrs:!0,linkAttributeBlock:!0,linkTextBlock:!0},s={disabled:!0,readonly:!0,multiple:!0,checked:!0};twttr.txt.tagAttrs=
function(e){var i="",d;for(d in e){var a=e[d];s[d]&&(a=a?d:null);null!=a&&(i+=" "+twttr.txt.htmlEscape(d)+'="'+twttr.txt.htmlEscape(a.toString())+'"')}return i};twttr.txt.linkToText=function(e,i,d,a){a.suppressNoFollow||(d.rel="nofollow");a.linkAttributeBlock&&a.linkAttributeBlock(e,d);a.linkTextBlock&&(i=a.linkTextBlock(e,i));e={text:i,attr:twttr.txt.tagAttrs(d)};return l("<a#{attr}>#{text}</a>",e)};twttr.txt.linkToTextWithSymbol=function(e,i,d,a,b){var c=b.symbolTag?"<"+b.symbolTag+">"+i+"</"+b.symbolTag+
">":i,d=twttr.txt.htmlEscape(d),d=b.textWithSymbolTag?"<"+b.textWithSymbolTag+">"+d+"</"+b.textWithSymbolTag+">":d;return b.usernameIncludeSymbol||!i.match(twttr.txt.regexen.atSigns)?twttr.txt.linkToText(e,c+d,a,b):c+twttr.txt.linkToText(e,d,a,b)};twttr.txt.linkToHashtag=function(e,i,d){var i=i.substring(e.indices[0],e.indices[0]+1),a=twttr.txt.htmlEscape(e.hashtag),b=m(d.htmlAttrs||{});b.href=d.hashtagUrlBase+a;b.title="#"+a;b["class"]=d.hashtagClass;return twttr.txt.linkToTextWithSymbol(e,i,a,b,
d)};twttr.txt.linkToCashtag=function(e,i,d){var i=twttr.txt.htmlEscape(e.cashtag),a=m(d.htmlAttrs||{});a.href=d.cashtagUrlBase+i;a.title="$"+i;a["class"]=d.cashtagClass;return twttr.txt.linkToTextWithSymbol(e,"$",i,a,d)};twttr.txt.linkToMentionAndList=function(e,a,d){var a=a.substring(e.indices[0],e.indices[0]+1),b=twttr.txt.htmlEscape(e.screenName),c=twttr.txt.htmlEscape(e.listSlug),k=e.listSlug&&!d.suppressLists,j=m(d.htmlAttrs||{});j["class"]=k?d.listClass:d.usernameClass;j.href=k?d.listUrlBase+
b+c:d.usernameUrlBase+b;!k&&!d.suppressDataScreenName&&(j["data-screen-name"]=b);return twttr.txt.linkToTextWithSymbol(e,a,k?b+c:b,j,d)};twttr.txt.linkToUrl=function(e,a,d){var a=e.url,b=twttr.txt.htmlEscape(a),c=d.urlEntities&&d.urlEntities[a]||e;c.display_url&&(b=twttr.txt.linkTextWithEntity(c,d));var k=m(d.htmlAttrs||{});k.href=a;d.urlClass&&(k["class"]=d.urlClass);d.urlTarget&&(k.target=d.urlTarget);!d.title&&c.display_url&&(k.title=c.expanded_url);return twttr.txt.linkToText(e,b,k,d)};twttr.txt.linkTextWithEntity=
function(e,a){var d=e.display_url,b=e.expanded_url,c=d.replace(/\u2026/g,"");if(-1!=b.indexOf(c)){var k=b.indexOf(c),d={displayUrlSansEllipses:c,beforeDisplayUrl:b.substr(0,k),afterDisplayUrl:b.substr(k+c.length),precedingEllipsis:d.match(/^\u2026/)?"\u2026":"",followingEllipsis:d.match(/\u2026$/)?"\u2026":""},j;for(j in d)d.hasOwnProperty(j)&&(d[j]=twttr.txt.htmlEscape(d[j]));d.invisible=a.invisibleTagAttrs;return l("<span class='tco-ellipsis'>#{precedingEllipsis}<span #{invisible}>&nbsp;</span></span><span #{invisible}>#{beforeDisplayUrl}</span><span class='js-display-url'>#{displayUrlSansEllipses}</span><span #{invisible}>#{afterDisplayUrl}</span><span class='tco-ellipsis'><span #{invisible}>&nbsp;</span>#{followingEllipsis}</span>",
d)}return d};twttr.txt.autoLinkEntities=function(e,a,d){d=m(d||{});d.hashtagClass=d.hashtagClass||"tweet-url hashtag";d.hashtagUrlBase=d.hashtagUrlBase||"https://twitter.com/#!/search?q=%23";d.cashtagClass=d.cashtagClass||"tweet-url cashtag";d.cashtagUrlBase=d.cashtagUrlBase||"https://twitter.com/#!/search?q=%24";d.listClass=d.listClass||"tweet-url list-slug";d.usernameClass=d.usernameClass||"tweet-url username";d.usernameUrlBase=d.usernameUrlBase||"https://twitter.com/";d.listUrlBase=d.listUrlBase||
"https://twitter.com/";d.htmlAttrs=twttr.txt.extractHtmlAttrsFromOptions(d);d.invisibleTagAttrs=d.invisibleTagAttrs||"style='position:absolute;left:-9999px;'";var b,c,k;if(d.urlEntities){b={};c=0;for(k=d.urlEntities.length;c<k;c++)b[d.urlEntities[c].url]=d.urlEntities[c];d.urlEntities=b}b="";k=0;a.sort(function(e,d){return e.indices[0]-d.indices[0]});for(c=0;c<a.length;c++){var j=a[c];b+=e.substring(k,j.indices[0]);j.url?b+=twttr.txt.linkToUrl(j,e,d):j.hashtag?b+=twttr.txt.linkToHashtag(j,e,d):j.screenName?
b+=twttr.txt.linkToMentionAndList(j,e,d):j.cashtag&&(b+=twttr.txt.linkToCashtag(j,e,d));k=j.indices[1]}return b+=e.substring(k,e.length)};twttr.txt.autoLinkWithJSON=function(e,a,d){var b=[],c;for(c in a)b=b.concat(a[c]);for(a=0;a<b.length;a++)entity=b[a],entity.screen_name?entity.screenName=entity.screen_name:entity.text&&(entity.hashtag=entity.text);twttr.txt.modifyIndicesFromUnicodeToUTF16(e,b);return twttr.txt.autoLinkEntities(e,b,d)};twttr.txt.extractHtmlAttrsFromOptions=function(e){var a={},
d;for(d in e){var b=e[d];t[d]||(s[d]&&(b=b?d:null),null!=b&&(a[d]=b))}return a};twttr.txt.autoLink=function(e,a){var d=twttr.txt.extractEntitiesWithIndices(e,{extractUrlWithoutProtocol:!1});return twttr.txt.autoLinkEntities(e,d,a)};twttr.txt.autoLinkUsernamesOrLists=function(e,a){var d=twttr.txt.extractMentionsOrListsWithIndices(e);return twttr.txt.autoLinkEntities(e,d,a)};twttr.txt.autoLinkHashtags=function(e,a){var d=twttr.txt.extractHashtagsWithIndices(e);return twttr.txt.autoLinkEntities(e,d,
a)};twttr.txt.autoLinkCashtags=function(e,a){var d=twttr.txt.extractCashtagsWithIndices(e);return twttr.txt.autoLinkEntities(e,d,a)};twttr.txt.autoLinkUrlsCustom=function(a,b){var d=twttr.txt.extractUrlsWithIndices(a,{extractUrlWithoutProtocol:!1});return twttr.txt.autoLinkEntities(a,d,b)};twttr.txt.removeOverlappingEntities=function(a){a.sort(function(a,d){return a.indices[0]-d.indices[0]});for(var b=a[0],d=1;d<a.length;d++)b.indices[1]>a[d].indices[0]?(a.splice(d,1),d--):b=a[d]};twttr.txt.extractEntitiesWithIndices=
function(a,b){var d=twttr.txt.extractUrlsWithIndices(a,b).concat(twttr.txt.extractMentionsOrListsWithIndices(a)).concat(twttr.txt.extractHashtagsWithIndices(a,{checkUrlOverlap:!1})).concat(twttr.txt.extractCashtagsWithIndices(a));if(0==d.length)return[];twttr.txt.removeOverlappingEntities(d);return d};twttr.txt.extractMentions=function(a){for(var b=[],a=twttr.txt.extractMentionsWithIndices(a),d=0;d<a.length;d++)b.push(a[d].screenName);return b};twttr.txt.extractMentionsWithIndices=function(a){for(var b=
[],a=twttr.txt.extractMentionsOrListsWithIndices(a),d=0;d<a.length;d++)mentionOrList=a[d],""==mentionOrList.listSlug&&b.push({screenName:mentionOrList.screenName,indices:mentionOrList.indices});return b};twttr.txt.extractMentionsOrListsWithIndices=function(a){if(!a||!a.match(twttr.txt.regexen.atSigns))return[];var b=[];a.replace(twttr.txt.regexen.validMentionOrList,function(a,e,c,k,j,f,h){h.slice(f+a.length).match(twttr.txt.regexen.endMentionMatch)||(j=j||"",a=f+e.length,b.push({screenName:k,listSlug:j,
indices:[a,a+k.length+j.length+1]}))});return b};twttr.txt.extractReplies=function(a){if(!a)return null;a=a.match(twttr.txt.regexen.validReply);return!a||RegExp.rightContext.match(twttr.txt.regexen.endMentionMatch)?null:a[1]};twttr.txt.extractUrls=function(a,b){for(var d=[],c=twttr.txt.extractUrlsWithIndices(a,b),f=0;f<c.length;f++)d.push(c[f].url);return d};twttr.txt.extractUrlsWithIndices=function(a,b){b||(b={extractUrlsWithoutProtocol:!0});if(!a||(b.extractUrlsWithoutProtocol?!a.match(/\./):!a.match(/:/)))return[];
for(var d=[];twttr.txt.regexen.extractUrl.exec(a);){var c=RegExp.$2,f=RegExp.$3,k=RegExp.$5,j=RegExp.$7,h=twttr.txt.regexen.extractUrl.lastIndex,g=h-f.length;if(RegExp.$4)f.match(twttr.txt.regexen.validTcoUrl)&&(f=RegExp.lastMatch,h=g+f.length),d.push({url:f,indices:[g,h]});else if(b.extractUrlsWithoutProtocol&&!c.match(twttr.txt.regexen.invalidUrlWithoutProtocolPrecedingChars)){var q=null,l=!1,m=0;k.replace(twttr.txt.regexen.validAsciiDomain,function(a){var b=k.indexOf(a,m);m=b+a.length;q={url:a,
indices:[g+b,g+m]};(l=a.match(twttr.txt.regexen.invalidShortDomain))||d.push(q)});null!=q&&j&&(l&&d.push(q),q.url=f.replace(k,q.url),q.indices[1]=h)}}return d};twttr.txt.extractHashtags=function(a){for(var b=[],a=twttr.txt.extractHashtagsWithIndices(a),d=0;d<a.length;d++)b.push(a[d].hashtag);return b};twttr.txt.extractHashtagsWithIndices=function(a,b){b||(b={checkUrlOverlap:!0});if(!a||!a.match(twttr.txt.regexen.hashSigns))return[];var d=[];a.replace(twttr.txt.regexen.validHashtag,function(a,b,e,
c,i,f){f.slice(i+a.length).match(twttr.txt.regexen.endHashtagMatch)||(a=i+b.length,d.push({hashtag:c,indices:[a,a+c.length+1]}))});if(b.checkUrlOverlap){var c=twttr.txt.extractUrlsWithIndices(a);if(0<c.length){c=d.concat(c);twttr.txt.removeOverlappingEntities(c);for(var d=[],f=0;f<c.length;f++)c[f].hashtag&&d.push(c[f])}}return d};twttr.txt.extractCashtags=function(a){for(var b=[],a=twttr.txt.extractCashtagsWithIndices(a),d=0;d<a.length;d++)b.push(a[d].cashtag);return b};twttr.txt.extractCashtagsWithIndices=
function(a){if(!a||-1==a.indexOf("$"))return[];var b=[];a.replace(twttr.txt.regexen.validCashtag,function(a,e,c,f,h){a=h+e.length;b.push({cashtag:f,indices:[a,a+f.length+1]})});return b};twttr.txt.modifyIndicesFromUnicodeToUTF16=function(a,b){twttr.txt.convertUnicodeIndices(a,b,!1)};twttr.txt.modifyIndicesFromUTF16ToUnicode=function(a,b){twttr.txt.convertUnicodeIndices(a,b,!0)};twttr.txt.convertUnicodeIndices=function(a,b,d){if(0!=b.length){var c=0,f=0;b.sort(function(a,b){return a.indices[0]-b.indices[0]});
for(var k=0,h=b[0];c<a.length;){if(h.indices[0]==(d?c:f)){var g=h.indices[1]-h.indices[0];h.indices[0]=d?f:c;h.indices[1]=h.indices[0]+g;k++;if(k==b.length)break;h=b[k]}g=a.charCodeAt(c);55296<=g&&(56319>=g&&c<a.length-1)&&(g=a.charCodeAt(c+1),56320<=g&&57343>=g&&c++);f++;c++}}};twttr.txt.splitTags=function(a){for(var a=a.split("<"),b,d=[],c=0;c<a.length;c+=1)if(b=a[c]){b=b.split(">");for(var f=0;f<b.length;f+=1)d.push(b[f])}else d.push("");return d};twttr.txt.hitHighlight=function(a,b,d){b=b||[];
d=d||{};if(0===b.length)return a;var d=d.tag||"em",d=["<"+d+">","</"+d+">"],a=twttr.txt.splitTags(a),c,f,h="",j=0,g=a[0],m=0,l=0,n=!1,p=g,s=[],r;for(c=0;c<b.length;c+=1)for(f=0;f<b[c].length;f+=1)s.push(b[c][f]);for(b=0;b<s.length;b+=1){f=s[b];c=d[b%2];for(r=!1;null!=g&&f>=m+g.length;)h+=p.slice(l),n&&f===m+p.length&&(h+=c,r=!0),a[j+1]&&(h+="<"+a[j+1]+">"),m+=p.length,l=0,j+=2,p=g=a[j],n=!1;!r&&null!=g?(n=f-m,h+=p.slice(l,n)+c,l=n,n=0===b%2?!0:!1):r||(h+=c)}if(null!=g){l<p.length&&(h+=p.slice(l));
for(b=j+1;b<a.length;b+=1)h+=0===b%2?a[b]:"<"+a[b]+">"}return h};var r=[f(65534),f(65279),f(65535),f(8234),f(8235),f(8236),f(8237),f(8238)];twttr.txt.getTweetLength=function(a,b){b||(b={short_url_length:20,short_url_length_https:21});for(var d=a.length,c=twttr.txt.extractUrlsWithIndices(a),f=0;f<c.length;f++)d+=c[f].indices[0]-c[f].indices[1],d=c[f].url.toLowerCase().match(/^https:\/\//)?d+b.short_url_length_https:d+b.short_url_length;return d};twttr.txt.isInvalidTweet=function(a){if(!a)return"empty";
if(140<twttr.txt.getTweetLength(a))return"too_long";for(var b=0;b<r.length;b++)if(0<=a.indexOf(r[b]))return"invalid_characters";return!1};twttr.txt.isValidTweetText=function(a){return!twttr.txt.isInvalidTweet(a)};twttr.txt.isValidUsername=function(a){if(!a)return!1;var b=twttr.txt.extractMentions(a);return 1===b.length&&b[0]===a.slice(1)};var p=c(/^#{validMentionOrList}$/);twttr.txt.isValidList=function(a){a=a.match(p);return!(!a||!(""==a[1]&&a[4]))};twttr.txt.isValidHashtag=function(a){if(!a)return!1;
var b=twttr.txt.extractHashtags(a);return 1===b.length&&b[0]===a.slice(1)};twttr.txt.isValidUrl=function(a,b,d){null==b&&(b=!0);null==d&&(d=!0);if(!a)return!1;var c=a.match(twttr.txt.regexen.validateUrlUnencoded);if(!c||c[0]!==a)return!1;var a=c[1],f=c[2],h=c[3],j=c[4],c=c[5];return d&&(!g(a,twttr.txt.regexen.validateUrlScheme)||!a.match(/^https?$/i))||!g(h,twttr.txt.regexen.validateUrlPath)||!g(j,twttr.txt.regexen.validateUrlQuery,!0)||!g(c,twttr.txt.regexen.validateUrlFragment,!0)?!1:b&&g(f,twttr.txt.regexen.validateUrlUnicodeAuthority)||
!b&&g(f,twttr.txt.regexen.validateUrlAuthority)};"undefined"!=typeof module&&module.exports&&(module.exports=twttr.txt)})();(function(){try{var c=!1,l,a;chrome.omnibox.onInputEntered.addListener(function(a){twttr.txt.isValidTweetText(a)&&(c=a,l&&m(c,l,"tweetEntered"),console.log("tweet:"+a))});chrome.omnibox.onInputStarted.addListener(function(){console.log("onInputStarted, requesting authToken");var a=new XMLHttpRequest;a.open("GET","https://twitter.com",!0);a.onreadystatechange=function(){var f,b=a.responseText;b&&(f=b.indexOf('name="authenticity_token"'));if(b&&-1<f){f=b.substring(0,f);var b=f.lastIndexOf('value="')+
7,g=f.lastIndexOf('"');l=f.substring(b,g);if(-1<l.indexOf(" "))throw Error("authToken is clearly invalid, it contains spaces.");console.log("authToken:"+l);c&&m(c,l,"xhr");a.abort()}};a.send()});chrome.omnibox.setDefaultSuggestion({description:"Tweet: %s"});chrome.omnibox.onInputChanged.addListener(function(a){100<a.length?(a=twttr.txt.getTweetLength(a),140<a?chrome.omnibox.setDefaultSuggestion({description:"Tweet ("+a+"): TWEET TOO LONG"}):chrome.omnibox.setDefaultSuggestion({description:"Tweet ("+
a+"): %s ("+a+")"})):chrome.omnibox.setDefaultSuggestion({description:"Tweet: %s"})});var m=function(c,f,b){var g=function(a){if(!a)throw Error("arg error");};g("string"===typeof c);g(0<c.length);g("string"===typeof f);g(5<f.length);g(-1===f.indexOf(" "));a=new XMLHttpRequest;a.open("POST","https://twitter.com/i/tweet/create",!0);var l=c;a.onreadystatechange=function(){if(4===a.readyState){var c="xhr"===b?" (from xhr state)":"";if(200===a.status)console.log(JSON.parse(a.response)),confirm("Successfully posted tweet"+
c+"\n\nPress enter to view tweet now, or esc to close this popup")&&chrome.tabs.create({url:"https://twitter.com/"});else{var f=!0;try{var g=document.createElement("div");g.contentEditable=!0;document.body.appendChild(g);g.innerHTML=l;g.unselectable="off";g.focus();document.execCommand("SelectAll");document.execCommand("Copy",!1,null);document.body.removeChild(g);f=!1;alert("Your tweet failed to post, so we copied it to your clipboard."+c)}catch(e){}chrome.tabs.create({url:"https://twitter.com/"+
(f?"":"#"+l)})}a.abort();a=null}};a.setRequestHeader("Content-type","application/x-www-form-urlencoded");a.send("status="+c+"&place_id=&authenticity_token="+f);c=!1};chrome.omnibox.onInputCancelled.addListener(function(){c=!1;a&&a.abort()});console.log("loaded")}catch(g){throw alert("lastError:"+(chrome.runtime.lastError?chrome.runtime.lastError.message:"")),console.error("lastError object:",chrome.runtime.lastError),g;}})();
