(function(){try{var e,f,a;chrome.omnibox.onInputEntered.addListener(function(c){var b;b=c.trim();for(var d=b.search(isUrl),a=[];-1<d;){var g=b.indexOf(" ",d);a[a.length]=b.substring(d,g);d=b.search(isUrl)}b=b.length;140>b&&0<b&&(e=c,f&&h(e,f,"tweetEntered"),console.log("tweet:"+c))});chrome.omnibox.setDefaultSuggestion({description:"Tweet: %s"});chrome.omnibox.onInputStarted.addListener(function(){var c=new XMLHttpRequest;c.open("GET","https://twitter.com",!0);c.onreadystatechange=function(){var b,
a=c.responseText;a&&(b=a.indexOf('name="authenticity_token"'));if(a&&-1<b){b=a.substring(0,b);var a=b.lastIndexOf('value="')+7,g=b.lastIndexOf('"');f=b.substring(a,g);console.log("authToken:"+f);e&&h(e,f,"xhr");c.abort()}};c.send()});chrome.omnibox.onInputChanged.addListener(function(a){100<a.length?chrome.omnibox.setDefaultSuggestion({description:"Tweet ("+a.length+"): %s"}):chrome.omnibox.setDefaultSuggestion({description:"Tweet: %s"})});var h=function(c,b,d){a=new XMLHttpRequest;a.open("POST",
"https://twitter.com/i/tweet/create",!0);a.onreadystatechange=function(){4===a.readyState&&(alert("Posted tweet"+d),a.abort(),a=void 0)};a.setRequestHeader("Content-type","application/x-www-form-urlencoded");a.send("status="+c+"&place_id=&authenticity_token="+b);c=!1};chrome.omnibox.onInputCancelled.addListener(function(){e=!1;a&&a.abort()});console.log("loaded")}catch(g){throw console.error("lastError:"+(chrome.runtime.lastError?chrome.runtime.lastError.message:"")),console.error("lastError object:",
chrome.runtime.lastError),g;}})();
